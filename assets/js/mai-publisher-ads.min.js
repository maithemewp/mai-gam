function maiPubDefineSlot(e){let t=null;return googletag.cmd.push(()=>{const s=gamBase+ads[e].id,a=googletag.defineSlot(s,ads[e].sizes,"mai-ad-"+e);adSlotIds.push(s),adSlots.push(a),maiPubAdsVars.amazonUAM&&1===ads[e].sizes.length&&"fluid"===ads[e].sizes[0]&&(debug&&console.log("disabled safeframe: ",a.getSlotElementId()),a.setForceSafeFrame(!1)),a.setTargeting(refreshKey,refreshValue),ads[e].targets&&Object.keys(ads[e].targets).forEach(t=>{a.setTargeting(t,ads[e].targets[t])}),ads[e].splitTest&&"rand"===ads[e].splitTest&&a.setTargeting("st",Math.floor(100*Math.random())),a.addService(googletag.pubads()),a.defineSizeMapping(googletag.sizeMapping().addSize([1024,768],ads[e].sizesDesktop).addSize([728,480],ads[e].sizesTablet).addSize([0,0],ads[e].sizesMobile).build()),t=a}),t}function maiPubRefreshSlots(e){googletag.cmd.push(()=>{maiPubAdsVars.amazonUAM&&apstag.setDisplayBids(),googletag.pubads().refresh(e)})}function maiPubDisplaySlots(e){googletag.cmd.push(()=>{if(maiPubAdsVars.amazonUAM){const t=[];e.forEach(e=>{const s=e.getSlotElementId().replace("mai-ad-","");1===ads[s].sizes.length&&"fluid"===ads[s].sizes[0]||t.push({slotID:"mai-ad-"+s,slotName:gamBase+ads[s].id,sizes:ads[s].sizes})}),apstag.init({pubID:"79166f25-5776-4c3e-9537-abad9a584b43",adServer:"googletag",schain:{complete:1,ver:"1.0",nodes:[{asi:"bizbudding.com",sid:maiPubAdsVars.sellersId,hp:1,name:maiPubAdsVars.sellersName,domain:maiPubAdsVars.domain}]}}),t.length?apstag.fetchBids({slots:t,timeout:2e3,params:{adRefresh:"1"}},function(t){apstag.setDisplayBids(),googletag.pubads().refresh(e)}):e.length&&googletag.pubads().refresh(e)}else{if(!e.length)return;googletag.pubads().refresh(e)}})}window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[];const ads=maiPubAdsVars.ads,adSlotIds=[],adSlots=[],immediate=[],gamBase=maiPubAdsVars.gamBase,refreshKey="refresh",refreshValue=!0,refreshTime=30,debug=window.location.search.includes("dfpdeb")||window.location.search.includes("maideb"),{adSlotsATF:adSlotsATF,adSlotsBTF:adSlotsBTF}=Object.entries(ads).reduce((e,[t,s])=>("atf"===s.targets.ap||"bs"===s.targets.ap?e.adSlotsATF[t]=s:e.adSlotsBTF[t]=s,e),{adSlotsATF:{},adSlotsBTF:{}});debug&&console.log("v42","debug:",debug),googletag.cmd.push(()=>{Object.keys(adSlotsATF).forEach(e=>{immediate.push(maiPubDefineSlot(e))}),maiPubAdsVars.targets&&Object.keys(maiPubAdsVars.targets).forEach(e=>{googletag.pubads().setTargeting(e,maiPubAdsVars.targets[e].toString())}),googletag.pubads().setCentering(!0),googletag.pubads().disableInitialLoad(),googletag.pubads().enableSingleRequest();const e={},t={},s={};googletag.pubads().addEventListener("impressionViewable",function(t){const a=t.slot,o=a.getSlotElementId();a&&adSlotIds.includes(a.getAdUnitPath())&&Boolean(a.getTargeting(refreshKey).shift())&&(e[o]=Date.now(),s[o]=setTimeout(()=>{debug&&console.log("refreshed A:",o),maiPubRefreshSlots([a])},1e3*refreshTime))}),googletag.pubads().addEventListener("slotVisibilityChanged",a=>{const o=a.slot,d=o.getSlotElementId(),i=a.inViewPercentage>5;if(o&&adSlotIds.includes(o.getAdUnitPath())&&Boolean(o.getTargeting(refreshKey).shift())){if(i&&!t[d])t[d]=!0;else{if(i||!t[d])return;t[d]=!1}t[d]?void 0===e[d]||e[d]&&Date.now()-e[d]<1e3*refreshTime||(debug&&console.log("refreshed B:",d),maiPubRefreshSlots([o])):clearTimeout(s[d])}}),googletag.enableServices(),maiPubAdsVars.amazonUAM&&function(e,t,s,a,o,d,i){function g(s,a){t[e]._Q.push([s,a])}t[e]||(t[e]={init:function(){g("i",arguments)},fetchBids:function(){g("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},d=s.createElement(a),d.async=!0,d.src=o,i=s.getElementsByTagName(a)[0],i.parentNode.insertBefore(d,i))}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js"),immediate.length&&maiPubDisplaySlots(immediate),debug&&(googletag.pubads().addEventListener("slotRequested",e=>{console.log("fetched:",e.slot.getSlotElementId())}),googletag.pubads().addEventListener("slotResponseReceived",e=>{console.log("received:",e.slot.getSlotElementId(),e.slot.getResponseInformation())}),googletag.pubads().addEventListener("slotOnload",e=>{console.log("rendered:",e.slot.getSlotElementId())}))}),document.addEventListener("DOMContentLoaded",function(){googletag.cmd.push(()=>{function e(){s.length&&(debug&&console.log("processing slots",s),maiPubDisplaySlots(s.map(e=>maiPubDefineSlot(e))),s=[])}let t=!0,s=[];const a=new IntersectionObserver((a,o)=>{a.forEach(e=>{if(!e.isIntersecting)return;const t=e.target.getAttribute("id").replace("mai-ad-",""),a=adSlotsBTF[t];void 0!==a?(debug&&(e.target.style.border="2px dashed red"),s.push(t),o.unobserve(e.target)):o.unobserve(e.target)}),t?(e(),t=!1):setTimeout(()=>{e()},250)},{root:null,rootMargin:"600px 0px 600px 0px",threshold:0}),o=document.querySelectorAll(".maipub-entry");o.forEach(e=>{let t=e.parentElement.querySelector(".entry:first-of-type"),s=t.offsetHeight;s=Math.max(90,s),e.style.minHeight=Math.max(90,s)+"px"});const d=document.querySelectorAll('.mai-ad-unit:not([data-ap="atf"])');d.forEach(e=>{a.observe(e)})})});