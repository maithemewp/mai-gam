window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[];const ads=maiPubAdsVars.ads,adSlotIds=[],adSlots=[],immediate=[],gamBase=maiPubAdsVars.gamBase,refreshKey="refresh",refreshValue=!0,refreshTime=30,debug=window.location.search.includes("dfpdeb")||window.location.search.includes("maideb"),{adSlotsATF:adSlotsATF,adSlotsBTF:adSlotsBTF}=Object.entries(ads).reduce(((e,[a,t])=>("atf"===t.targets.ap||"bs"===t.targets.ap?e.adSlotsATF[a]=t:e.adSlotsBTF[a]=t,e)),{adSlotsATF:{},adSlotsBTF:{}});function maiPubDefineSlot(e){let a=null;return googletag.cmd.push((()=>{const t=gamBase+ads[e].id,s=googletag.defineSlot(t,ads[e].sizes,"mai-ad-"+e);adSlotIds.push(t),adSlots.push(s),s.setTargeting("refresh",true),ads[e].targets&&Object.keys(ads[e].targets).forEach((a=>{s.setTargeting(a,ads[e].targets[a])})),ads[e].splitTest&&"rand"===ads[e].splitTest&&s.setTargeting("st",Math.floor(100*Math.random())),s.addService(googletag.pubads()),s.defineSizeMapping(googletag.sizeMapping().addSize([1024,768],ads[e].sizesDesktop).addSize([728,480],ads[e].sizesTablet).addSize([0,0],ads[e].sizesMobile).build()),a=s})),a}function maiPubDisplaySlots(e){googletag.cmd.push((()=>{if(maiPubAdsVars.amazonUAM){const a=[];if(apstag.init({pubID:"79166f25-5776-4c3e-9537-abad9a584b43",adServer:"googletag",schain:{complete:1,ver:"1.0",nodes:[{asi:"bizbudding.com",sid:maiPubAdsVars.sellersId,hp:1,name:maiPubAdsVars.sellersName,domain:maiPubAdsVars.domain}]}}),e.forEach((t=>{const s=t.getSlotElementId().replace("mai-ad-","");1!==ads[s].sizes.length||"fluid"!==ads[s].sizes[0]?a.push({slotID:"mai-ad-"+s,slotName:gamBase+ads[s].id,sizes:ads[s].sizes}):delete e[s]})),!a.length)return;apstag.fetchBids({slots:a,timeout:2e3,params:{adRefresh:"1"}},(function(a){googletag.cmd.push((function(){apstag.setDisplayBids(),googletag.pubads().refresh(e)}))}))}else{if(!e.length)return;googletag.pubads().refresh(e)}}))}function maiPubRefreshSlots(e){googletag.cmd.push((()=>{maiPubAdsVars.amazonUAM&&apstag.setDisplayBids(),googletag.pubads().refresh(e)}))}googletag.cmd.push((()=>{googletag.pubads().setForceSafeFrame(!maiPubAdsVars.amazonUAM),Object.keys(adSlotsATF).forEach((e=>{immediate.push(maiPubDefineSlot(e))})),maiPubAdsVars.targets&&Object.keys(maiPubAdsVars.targets).forEach((e=>{googletag.pubads().setTargeting(e,maiPubAdsVars.targets[e].toString())})),googletag.pubads().setCentering(!0),googletag.pubads().disableInitialLoad(),googletag.pubads().enableSingleRequest();const e={},a={},t={};googletag.pubads().addEventListener("impressionViewable",(function(a){const s=a.slot,o=s.getSlotElementId();s&&adSlotIds.includes(s.getAdUnitPath())&&Boolean(s.getTargeting("refresh").shift())&&(e[o]=Date.now(),t[o]=setTimeout((()=>{maiPubRefreshSlots([s])}),3e4))})),googletag.pubads().addEventListener("slotVisibilityChanged",(s=>{const o=s.slot,i=o.getSlotElementId(),d=s.inViewPercentage>5;if(o&&adSlotIds.includes(o.getAdUnitPath())&&Boolean(o.getTargeting("refresh").shift())){if(d&&!a[i])a[i]=!0;else{if(d||!a[i])return;a[i]=!1}a[i]?void 0===e[i]||e[i]&&Date.now()-e[i]<3e4||maiPubRefreshSlots([o]):clearTimeout(t[i])}})),googletag.enableServices(),maiPubAdsVars.amazonUAM&&function(e,a,t,s,o,i,d){function g(t,s){a[e]._Q.push([t,s])}a[e]||(a[e]={init:function(){g("i",arguments)},fetchBids:function(){g("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(i=t.createElement(s)).async=!0,i.src="//c.amazon-adsystem.com/aax2/apstag.js",(d=t.getElementsByTagName(s)[0]).parentNode.insertBefore(i,d))}("apstag",window,document,"script"),immediate.length&&maiPubDisplaySlots(immediate),debug&&(googletag.pubads().addEventListener("slotRequested",(e=>{})),googletag.pubads().addEventListener("slotOnload",(e=>{})))})),document.addEventListener("DOMContentLoaded",(function(){googletag.cmd.push((()=>{let e=!0,a=[];const t=new IntersectionObserver(((t,o)=>{t.forEach((e=>{if(!e.isIntersecting)return;const t=e.target.getAttribute("id").replace("mai-ad-","");void 0!==adSlotsBTF[t]?(debug&&(e.target.style.border="2px dashed red"),a.push(t),o.unobserve(e.target)):o.unobserve(e.target)})),e?(s(),e=!1):setTimeout((()=>{s()}),200)}),{root:null,rootMargin:"600px 0px 600px 0px",threshold:0});function s(){a.length&&(maiPubDisplaySlots(a.map((e=>maiPubDefineSlot(e)))),a=[])}document.querySelectorAll('.mai-ad-unit:not([data-ap="atf"])').forEach((e=>{t.observe(e)}))}))}));