function maiPubDOMContentLoaded(){const e=[],t=document.querySelectorAll('.mai-ad-unit[data-ap="atf"], .mai-ad-unit[data-ap="bs"]'),a=document.querySelectorAll('.mai-ad-unit:not([data-ap="atf"]):not([data-ap="bs"])'),s=new IntersectionObserver((e,t)=>{let a=[];e.forEach(e=>{if(!e.isIntersecting)return;const s=e.target.getAttribute("id").replace("mai-ad-","");debug&&(e.target.style.outline="2px dashed red",e.target.style.minWidth="300px",e.target.style.minHeight="90px",e.target.setAttribute("data-label",s)),a.push(s),t.unobserve(e.target)}),a.length&&(maiPubDisplaySlots(a.map(e=>maiPubDefineSlot(e))),a=[])},{root:null,rootMargin:"600px 0px 600px 0px",threshold:0});t.forEach(t=>{const a=t.getAttribute("id").replace("mai-ad-","");e.push(maiPubDefineSlot(a)),debug&&(t.style.outline="2px dashed limegreen",t.style.minWidth="300px",t.style.minHeight="90px",t.setAttribute("data-label",a))}),e.length&&maiPubDisplaySlots(e),a.forEach(e=>{s.observe(e)})}function maiPubDefineSlot(e){let t=null;const a="client"===ads[e].context?gamBaseClient:gamBase,s=a+ads[e].id,i=googletag.defineSlot(s,ads[e].sizes,"mai-ad-"+e);return googletag.display("mai-ad-"+e),maiPubLog("defineSlot() & display(): "+e),adSlotIds.push(s),adSlots.push(i),i.setTargeting(refreshKey,refreshValue),ads[e].targets&&Object.keys(ads[e].targets).forEach(t=>{i.setTargeting(t,ads[e].targets[t])}),ads[e].splitTest&&"rand"===ads[e].splitTest&&i.setTargeting("st",Math.floor(100*Math.random())),i.addService(googletag.pubads()),i.defineSizeMapping(googletag.sizeMapping().addSize([1024,768],ads[e].sizesDesktop).addSize([728,480],ads[e].sizesTablet).addSize([0,0],ads[e].sizesMobile).build()),t=i,t}function maiPubDisplaySlots(e){googletag.enableServices();const t=3500,a={adserverRequestSent:!1,dmBidsReceived:!0,apsBidsReceived:!1},s=function(){a.adserverRequestSent||(a.adserverRequestSent=!0,googletag.pubads().refresh(e))};if(maiPubAdsVars.amazonUAM){const t=[];e.forEach(e=>{const a=e.getSlotElementId().replace("mai-ad-","");1===ads[a].sizes.length&&"fluid"===ads[a].sizes[0]||"client"!==ads[a].context&&t.push({slotID:"mai-ad-"+a,slotName:gamBase+ads[a].id,sizes:ads[a].sizes})}),t.length?apstag.fetchBids({slots:t,timeout:2e3,params:{adRefresh:"1"}},function(e){apstag.setDisplayBids(),a.apsBidsReceived=!0,a.dmBidsReceived&&(s(),maiPubLog("refresh() with amazon fetch: "+t.map(e=>e.slotID.replace("mai-ad-","")).join(", ")))}):e.length&&(a.apsBidsReceived=!0,a.dmBidsReceived&&(s(),maiPubLog("refresh() without amazon slots to fetch: "+e.map(e=>e.getSlotElementId()).join(", "))))}else{if(!e.length)return;a.apsBidsReceived=!0,a.dmBidsReceived&&s(),maiPubLog("refresh() with GAM:"+e.map(e=>e.getSlotElementId()).join(", "))}setTimeout(function(){a.adserverRequestSent||maiPubLog("refresh() with failsafe timeout: "+e.map(e=>e.getSlotElementId()).join(", ")),s()},t)}function maiPubIsRefreshable(e){return e&&adSlotIds.includes(e.getAdUnitPath())&&Boolean(e.getTargeting(refreshKey).shift())}function maiPubRefreshSlots(e){maiPubAdsVars.amazonUAM&&(maiPubLog("setDisplayBids via apstag: "+e.map(e=>e.getSlotElementId()).join(", ")),apstag.setDisplayBids()),googletag.pubads().refresh(e,{changeCorrelator:!1})}function maiPubLog(...e){if(!debug&&!log)return;let t="maipub ";const a=Date.now(),s=(new Date).toLocaleTimeString("en-US",{hour12:!0});t+=timestamp===a?"start":a-timestamp+"ms",console.log(t+" "+s,e)}window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[];const ads=maiPubAdsVars.ads,adSlotIds=[],adSlots=[],gamBase=maiPubAdsVars.gamBase,gamBaseClient=maiPubAdsVars.gamBaseClient,refreshKey="refresh",refreshValue=maiPubAdsVars.targets.refresh,refreshTime=30,debug=window.location.search.includes("dfpdeb")||window.location.search.includes("maideb"),log=maiPubAdsVars.debug;let timestamp=Date.now();maiPubLog("v165"),googletag.cmd.push(()=>{maiPubAdsVars.targets&&Object.keys(maiPubAdsVars.targets).forEach(e=>{googletag.pubads().setTargeting(e,maiPubAdsVars.targets[e].toString())}),googletag.pubads().setCentering(!0),googletag.pubads().disableInitialLoad(),googletag.pubads().enableSingleRequest(),maiPubAdsVars.amazonUAM&&(!function(e,t,a,s,i,o,d){function n(a,s){t[e]._Q.push([a,s])}t[e]||(t[e]={init:function(){n("i",arguments)},fetchBids:function(){n("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},o=a.createElement(s),o.async=!0,o.src=i,d=a.getElementsByTagName(s)[0],d.parentNode.insertBefore(o,d))}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js"),apstag.init({pubID:"79166f25-5776-4c3e-9537-abad9a584b43",adServer:"googletag",schain:{complete:1,ver:"1.0",nodes:[{asi:"bizbudding.com",sid:maiPubAdsVars.sellersId,hp:1,name:maiPubAdsVars.sellersName,domain:maiPubAdsVars.domain}]}})),maiPubAdsVars.loadDelay?window.addEventListener("load",function(){setTimeout(maiPubDOMContentLoaded,maiPubAdsVars.loadDelay)}):"loading"===document.readyState?document.addEventListener("DOMContentLoaded",maiPubDOMContentLoaded):maiPubDOMContentLoaded();const e={},t={},a={};googletag.pubads().addEventListener("impressionViewable",function(t){const s=t.slot,i=s.getSlotElementId();maiPubIsRefreshable(s)&&(e[i]=Date.now(),a[i]=setTimeout(()=>{maiPubLog("refreshed via impressionViewable: "+i),maiPubRefreshSlots([s])},1e3*refreshTime))}),googletag.pubads().addEventListener("slotVisibilityChanged",s=>{const i=s.slot,o=i.getSlotElementId(),d=s.inViewPercentage>5;if(maiPubIsRefreshable(i)){if(d&&!t[o])t[o]=!0;else{if(d||!t[o])return;t[o]=!1}t[o]?void 0===e[o]||e[o]&&Date.now()-e[o]<1e3*refreshTime||(maiPubLog("refreshed via slotVisibilityChanged: "+o.replace("mai-ad-","")),maiPubRefreshSlots([i])):clearTimeout(a[o])}}),(debug||log)&&(googletag.pubads().addEventListener("slotRequested",e=>{maiPubLog("slotRequested: "+e.slot.getSlotElementId().replace("mai-ad-",""))}),googletag.pubads().addEventListener("slotResponseReceived",e=>{maiPubLog("slotResponseReceived: "+e.slot.getSlotElementId().replace("mai-ad-",""))}),googletag.pubads().addEventListener("slotOnload",e=>{maiPubLog("slotOnload: "+e.slot.getSlotElementId().replace("mai-ad-",""))}),googletag.pubads().addEventListener("slotRenderEnded",e=>{const t=e.slot,a={adUnitPath:t.getAdUnitPath(),creativeId:e.creativeId,isEmpty:e.isEmpty,lineItemId:e.lineItemId,size:e.size,slotId:t.getSlotElementId()};maiPubLog("slotRenderEnded: "+e.slot.getSlotElementId().replace("mai-ad-",""),a)}))});