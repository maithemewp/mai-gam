if(window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],window.googletag&&googletag.apiReady){const e=maiPubAdsVars.ads,a="refresh",t="true",s=30;googletag.cmd.push((()=>{const s=maiPubAdsVars.gamBase,g=[];Object.keys(e).forEach((g=>{const i=googletag.defineSlot(s+e[g].id,e[g].sizes,"mai-ad-"+g);i.setTargeting(a,t),e[g].targeting&&Object.keys(e[g].targeting).forEach((a=>{i.setTargeting(a,e[g].targeting[a])})),e[g].splitTest&&"rand"===e[g].splitTest&&i.setTargeting("st",Math.floor(100*Math.random())),i.addService(googletag.pubads()),i.defineSizeMapping(googletag.sizeMapping().addSize([1024,768],e[g].sizesDesktop).addSize([728,480],e[g].sizesTablet).addSize([0,0],e[g].sizesMobile).build())})),maiPubAdsVars.targeting&&Object.keys(maiPubAdsVars.targeting).forEach((e=>{googletag.pubads().setTargeting(e,maiPubAdsVars.targeting[e].toString())})),googletag.pubads().enableLazyLoad({fetchMarginPercent:200,renderMarginPercent:150}),googletag.pubads().setCentering(!0),googletag.pubads().disableInitialLoad(),googletag.pubads().enableSingleRequest(),googletag.enableServices(),maiPubAdsVars.amazonUAM?(!function(e,a,t,s,g,i,o){function n(t,s){a[e]._Q.push([t,s])}a[e]||(a[e]={init:function(){n("i",arguments)},fetchBids:function(){n("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(i=t.createElement(s)).async=!0,i.src="//c.amazon-adsystem.com/aax2/apstag.js",(o=t.getElementsByTagName(s)[0]).parentNode.insertBefore(i,o))}("apstag",window,document,"script"),apstag.init({pubID:"79166f25-5776-4c3e-9537-abad9a584b43",adServer:"googletag"}),Object.keys(e).forEach((a=>{g.push({slotID:"mai-ad-"+a,slotName:s+e[a].id,sizes:e[a].sizes})})),apstag.fetchBids({slots:g,timeout:2e3,params:{adRefresh:"1"}},(function(e){googletag.cmd.push((function(){apstag.setDisplayBids(),googletag.pubads().refresh()}))}))):googletag.pubads().refresh()}));const g={},i={},o={};googletag.pubads().addEventListener("impressionViewable",(function(e){const i=e.slot,n=i.getSlotElementId();i.getTargeting(a).indexOf(t)<0||(g[n]=Date.now(),o[n]=setTimeout((()=>{maiPubAdsVars.amazonUAM&&apstag.setDisplayBids(),googletag.pubads().refresh([i])}),1e3*s))})),googletag.pubads().addEventListener("slotVisibilityChanged",(e=>{const n=e.slot,d=n.getSlotElementId(),r=e.inViewPercentage>20;if(!(n.getTargeting(a).indexOf(t)<0)){if(r&&!i[d])i[d]=!0;else{if(r||!i[d])return;i[d]=!1}i[d]?void 0===g[d]||g[d]&&Date.now()-g[d]<1e3*s||(maiPubAdsVars.amazonUAM&&apstag.setDisplayBids(),googletag.pubads().refresh([n])):clearTimeout(o[d])}}))}