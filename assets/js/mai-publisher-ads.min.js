window.pbjs=window.pbjs||{que:[]},window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[];const ads=maiPubAdsVars.ads,adSlotIds=[],adSlots=[],gamBase=maiPubAdsVars.gamBase,gamBaseClient=maiPubAdsVars.gamBaseClient,refreshKey="refresh",refreshValue=maiPubAdsVars.targets.refresh,refreshTime=30,loadTimes={},currentlyVisible={},timeoutIds={},bidderTimeout=3e3,fallbackTimeout=3500,debug=window.location.search.includes("dfpdeb")||window.location.search.includes("maideb")||window.location.search.includes("pbjs_debug=true"),log=maiPubAdsVars.debug;let timestamp=Date.now();function maiPubDOMContentLoaded(){const e=[],t=document.querySelectorAll('.mai-ad-unit[data-ap="atf"], .mai-ad-unit[data-ap="bs"]'),a=document.querySelectorAll('.mai-ad-unit:not([data-ap="atf"]):not([data-ap="bs"])');googletag.cmd.push((()=>{t.forEach((t=>{const a=t.getAttribute("id").replace("mai-ad-","");e.push(maiPubDefineSlot(a)),debug&&(t.style.outline="2px dashed limegreen",t.setAttribute("data-label",a))})),e.length&&maiPubDisplaySlots(e)}));const s=new IntersectionObserver(((e,t)=>{const a=[];e.forEach((e=>{if(!e.isIntersecting)return;const s=e.target.getAttribute("id").replace("mai-ad-","");debug&&(e.target.style.outline="2px dashed red",e.target.setAttribute("data-label",s)),a.push(s),t.unobserve(e.target)})),a.length&&googletag.cmd.push((()=>{maiPubDisplaySlots(a.map((e=>maiPubDefineSlot(e))))}))}),{root:null,rootMargin:"600px 0px 600px 0px",threshold:0});a.forEach((e=>{s.observe(e)}))}function maiPubDefineSlot(e){let t=null;const a=(ads?.[e]?.context&&"client"===ads[e].context?gamBaseClient:gamBase)+ads[e].id,s="mai-ad-"+e,i=adSlots.find((e=>s==e.getSlotElementId()));if(i)return maiPubLog("Slot already defined:",i),i;const o=googletag.defineSlot(a,ads[e].sizes,"mai-ad-"+e);return googletag.display("mai-ad-"+e),maiPubLog("defineSlot() & display():",o),adSlotIds.push(a),adSlots.push(o),o.setTargeting("refresh",refreshValue),ads[e].targets&&Object.keys(ads[e].targets).forEach((t=>{o.setTargeting(t,ads[e].targets[t])})),ads[e].splitTest&&"rand"===ads[e].splitTest&&o.setTargeting("st",Math.floor(100*Math.random())),o.addService(googletag.pubads()),o.defineSizeMapping(googletag.sizeMapping().addSize([1024,768],ads[e].sizesDesktop).addSize([728,480],ads[e].sizesTablet).addSize([0,0],ads[e].sizesMobile).build()),t=o,t}function maiPubDisplaySlots(e){const t={adserverRequestSent:!1,dmBidsReceived:!1,apsBidsReceived:!1},a=function(){t.adserverRequestSent||(t.adserverRequestSent=!0,googletag.pubads().refresh(e))};if(maiPubAdsVars.magnite?pbjs.que.push((function(){const s={bidderTimeout:3e3,enableTIDs:!0,ortb2:maiPubAdsVars.ortb2};(debug||log)&&(s.debugging={enabled:!0}),maiPubLog("pbjsConfig",s),pbjs.setConfig(s),pbjs.rp.requestBids({gptSlotObjects:e,callback:function(){pbjs.setTargetingForGPTAsync(),t.dmBidsReceived=!0,t.apsBidsReceived&&(a(),maiPubLog("refresh() with prebid: "+uadSlots.map((e=>e.slotID.replace("mai-ad-",""))).join(", "),uadSlots))}})})):t.dmBidsReceived=!0,maiPubAdsVars.amazonUAM){const s=e.filter((e=>{const t=e.getSlotElementId().replace("mai-ad-","");return!(1===ads[t].sizes.length&&"fluid"===ads[t].sizes[0])&&"client"!==ads[t].context})).map((e=>{const t=e.getSlotElementId(),a=t.replace("mai-ad-","");return{slotID:t,slotName:gamBase+ads[a].id,sizes:ads[a].sizes}}));if(s.length){const e={slots:s,timeout:3e3,params:{adRefresh:"1"}};maiPubLog("amazonConfig",e),apstag.fetchBids(e,(function(e){apstag.setDisplayBids(),t.apsBidsReceived=!0,t.dmBidsReceived&&(a(),maiPubLog("refresh() with amazon fetch: "+s.map((e=>e.slotID.replace("mai-ad-",""))).join(", "),s)),(debug||log)&&e.forEach((e=>{e.error&&maiPubLog("apstag.fetchBids error:",e)}))}))}else e.length&&(t.apsBidsReceived=!0,t.dmBidsReceived&&(a(),maiPubLog("refresh() without amazon slots to fetch: "+e.map((e=>e.getSlotElementId())).join(", "),e)))}else{if(!e.length)return;t.apsBidsReceived=!0,t.dmBidsReceived&&a(),maiPubLog("refresh() with GAM:"+e.map((e=>e.getSlotElementId())).join(", "),e)}setTimeout((()=>{t.adserverRequestSent||maiPubLog("refresh() with failsafe timeout: "+e.map((e=>e.getSlotElementId())).join(", "),e),a()}),3500)}function maiPubIsMaiSlot(e){return e&&adSlotIds.includes(e.getAdUnitPath())}function maiPubIsRefreshable(e){return maiPubIsMaiSlot(e)&&Boolean(e.getTargeting("refresh").shift())}function maiPubRefreshSlots(e){maiPubAdsVars.amazonUAM&&(maiPubLog("setDisplayBids via apstag: "+e.map((e=>e.getSlotElementId())).join(", "),e),apstag.setDisplayBids()),googletag.pubads().refresh(e,{changeCorrelator:!1})}function maiPubLog(...e){if(!debug&&!log)return;let t="maipub ";const a=Date.now();(new Date).toLocaleTimeString("en-US",{hour12:!0});t+=timestamp===a?"start":a-timestamp+"ms"}maiPubLog("v201"),maiPubAdsVars.amazonUAM&&(!function(e,t,a,s,i,o,d){function n(a,s){t[e]._Q.push([a,s])}t[e]||(t[e]={init:function(){n("i",arguments)},fetchBids:function(){n("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(o=a.createElement(s)).async=!0,o.src="//c.amazon-adsystem.com/aax2/apstag.js",(d=a.getElementsByTagName(s)[0]).parentNode.insertBefore(o,d))}("apstag",window,document,"script"),apstag.init({pubID:"79166f25-5776-4c3e-9537-abad9a584b43",adServer:"googletag",schain:{complete:1,ver:"1.0",nodes:[{asi:"bizbudding.com",sid:maiPubAdsVars.sellersId,hp:1,name:maiPubAdsVars.sellersName,domain:maiPubAdsVars.domain}]}})),googletag.cmd.push((()=>{maiPubAdsVars.targets&&Object.keys(maiPubAdsVars.targets).forEach((e=>{googletag.pubads().setTargeting(e,maiPubAdsVars.targets[e].toString())})),googletag.pubads().setCentering(!0),googletag.pubads().disableInitialLoad(),googletag.pubads().enableSingleRequest(),googletag.enableServices(),maiPubAdsVars.loadDelay?window.addEventListener("load",(()=>{setTimeout(maiPubDOMContentLoaded,maiPubAdsVars.loadDelay)})):"loading"===document.readyState?document.addEventListener("DOMContentLoaded",maiPubDOMContentLoaded):maiPubDOMContentLoaded(),googletag.pubads().addEventListener("impressionViewable",(e=>{const t=e.slot,a=t.getSlotElementId();maiPubIsRefreshable(t)&&(loadTimes[a]=Date.now(),timeoutIds[a]&&clearTimeout(timeoutIds[a]),timeoutIds[a]=setTimeout((()=>{maiPubLog("refreshed via impressionViewable: "+a,t),maiPubRefreshSlots([t])}),3e4))})),googletag.pubads().addEventListener("slotVisibilityChanged",(e=>{const t=e.slot,a=t.getSlotElementId(),s=e.inViewPercentage>5;if(maiPubIsRefreshable(t)){if(s&&!currentlyVisible[a])currentlyVisible[a]=!0;else{if(s||!currentlyVisible[a])return;currentlyVisible[a]=!1}currentlyVisible[a]?!loadTimes?.[a]||loadTimes[a]&&Date.now()-loadTimes[a]<3e4||(maiPubLog("refreshed via slotVisibilityChanged: "+a,t),maiPubRefreshSlots([t])):clearTimeout(timeoutIds[a])}})),googletag.pubads().addEventListener("slotRenderEnded",(e=>{if(!e.isEmpty)return;if(!maiPubIsMaiSlot(e.slot))return;const t=e.slot.getSlotElementId().replace("mai-ad-","");"client"===ads[t].context&&ads?.[t]?.backfill&&ads?.[t]?.backfillId})),(debug||log)&&(googletag.pubads().addEventListener("slotRequested",(e=>{maiPubLog("slotRequested:",e.slot,e)})),googletag.pubads().addEventListener("slotResponseReceived",(e=>{maiPubLog("slotResponseReceived:",e.slot,e)})),googletag.pubads().addEventListener("slotOnload",(e=>{maiPubLog("slotOnload:",e.slot,e)})),googletag.pubads().addEventListener("slotRenderEnded",(e=>{maiPubLog("slotRenderEnded:",e.slot,e)})))}));